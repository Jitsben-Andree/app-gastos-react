
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") 
}

model Usuario {
  id         Int      @id @default(autoincrement())
  nombre     String
  correo     String   @unique 
  contrasena String
  creado_en  DateTime @default(now())

  // Relación: Un Usuario puede tener muchos Gastos
  gastos Gasto[]
  // --- NUEVA LÍNEA ---
  // Relación: Un Usuario puede tener muchos Ingresos
  ingresos Ingreso[]
}


model Gasto {
  id          String   @id @default(cuid())
  monto       Decimal  @db.Decimal(10, 2)
  categoria   String   // <-- AÑADIR ESTO
  fecha       DateTime
  descripcion String?
  creado_en   DateTime @default(now())

  usuario_id  Int
  usuario     Usuario @relation(fields: [usuario_id], references: [id], onDelete: Cascade)
}


model Ingreso {
  id          String   @id @default(cuid())
  monto       Decimal  @db.Decimal(10, 2)
  descripcion String
  fecha       DateTime
  creado_en   DateTime @default(now())

  // Relación: Cada Ingreso pertenece a un Usuario
  usuario_id Int
  usuario    Usuario  @relation(fields: [usuario_id], references: [id], onDelete: Cascade)
}