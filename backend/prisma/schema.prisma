
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") 

model Usuario {
  id         Int      @id @default(autoincrement())
  nombre     String
  correo     String   @unique 
  contrasena String
  creado_en  DateTime @default(now())

  // Relación: Un Usuario puede tener muchos Gastos
  gastos Gasto[]
  // --- NUEVA LÍNEA ---
  // Relación: Un Usuario puede tener muchos Ingresos
  ingresos Ingreso[]
}


model Gasto {
  id          String   @id @default(cuid()) 
  monto       Decimal  @db.Decimal(10, 2) 
  fecha       DateTime
  descripcion String? // El '?' lo hace opcional
  creado_en   DateTime @default(now())

  // Relación: Cada Gasto pertenece a un Usuario
  usuario_id Int
  usuario    Usuario  @relation(fields: [usuario_id], references: [id], onDelete: Cascade)
  // onDelete: Cascade -> Si se borra un usuario, se borran sus gastos.
}


model Ingreso {
  id          String   @id @default(cuid())
  monto       Decimal  @db.Decimal(10, 2)
  descripcion String
  fecha       DateTime
  creado_en   DateTime @default(now())

  // Relación: Cada Ingreso pertenece a un Usuario
  usuario_id Int
  usuario    Usuario  @relation(fields: [usuario_id], references: [id], onDelete: Cascade)
}